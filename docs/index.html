<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.4.553">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>Digital training for building resilience:</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 50,
  "keyboard-shortcut": [
    "f",
    "/",
    "s"
  ],
  "show-item-context": false,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-text-placeholder": "",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit",
    "search-label": "Search"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg " data-bs-theme="dark">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container mx-auto">
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">Digital training for building resilience:</span>
    </a>
  </div>
            <div id="quarto-search" class="" title="Search"></div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link active" href="./index.html" aria-current="page"> 
<span class="menu-text">Home</span></a>
  </li>  
  <li class="nav-item dropdown ">
    <a class="nav-link dropdown-toggle" href="#" id="nav-menu-study-examples" role="button" data-bs-toggle="dropdown" aria-expanded="false">
 <span class="menu-text">Study Examples</span>
    </a>
    <ul class="dropdown-menu" aria-labelledby="nav-menu-study-examples">    
        <li>
    <a class="dropdown-item" href="./study1.html">
 <span class="dropdown-text">A therapist-guided smartphone app for major depression in young adults</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./study2.html">
 <span class="dropdown-text">Study 2</span></a>
  </li>  
        <li>
    <a class="dropdown-item" href="./study3.html">
 <span class="dropdown-text">Study 3</span></a>
  </li>  
    </ul>
  </li>
</ul>
          </div> <!-- /navcollapse -->
          <div class="quarto-navbar-tools">
    <a href="https://digilab.uni-graz.at/en/" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-twitter"></i></a>
    <a href="https://github.com/FloPaho/building-resilience" title="" class="quarto-navigation-tool px-1" aria-label=""><i class="bi bi-github"></i></a>
</div>
      </div> <!-- /container-fluid -->
    </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#overview" id="toc-overview" class="nav-link active" data-scroll-target="#overview">Overview</a>
  <ul class="collapse">
  <li><a href="#focus-of-the-study" id="toc-focus-of-the-study" class="nav-link" data-scroll-target="#focus-of-the-study">Focus of the study</a></li>
  <li><a href="#target-group" id="toc-target-group" class="nav-link" data-scroll-target="#target-group">Target group</a></li>
  <li><a href="#effect-size" id="toc-effect-size" class="nav-link" data-scroll-target="#effect-size">Effect size</a></li>
  <li><a href="#further-notable-results" id="toc-further-notable-results" class="nav-link" data-scroll-target="#further-notable-results">Further notable results</a></li>
  </ul></li>
  <li><a href="#what-is-this-study-about" id="toc-what-is-this-study-about" class="nav-link" data-scroll-target="#what-is-this-study-about">What is this study about?</a></li>
  <li><a href="#what-does-this-study-find" id="toc-what-does-this-study-find" class="nav-link" data-scroll-target="#what-does-this-study-find">What does this study find?</a></li>
  <li><a href="#qualitiy-of-the-meta-analysis" id="toc-qualitiy-of-the-meta-analysis" class="nav-link" data-scroll-target="#qualitiy-of-the-meta-analysis">Qualitiy of the meta-analysis</a></li>
  <li><a href="#quality-of-the-evidence" id="toc-quality-of-the-evidence" class="nav-link" data-scroll-target="#quality-of-the-evidence">Quality of the evidence</a></li>
  <li><a href="#conclusion-for-teaching-practice" id="toc-conclusion-for-teaching-practice" class="nav-link" data-scroll-target="#conclusion-for-teaching-practice">Conclusion for teaching practice</a></li>
  <li><a href="#study-example" id="toc-study-example" class="nav-link" data-scroll-target="#study-example">Study example</a></li>
  <li><a href="#references" id="toc-references" class="nav-link" data-scroll-target="#references">References</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">Digital training for building resilience:</h1>
<p class="subtitle lead">Systematic review, meta‐analysis, and meta‐regression</p>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<p><span class="bold">Coping with stress: In times of crises such as the COVID-19 pandemic and geopolitical conflicts, mental health issues have climbed to an all time high. Stress is a primary driver of those, which is why building a psychological “defense shield” against stress and its consequences is crucial. Resilience is the scientific term for this defense shield and describes the ability to successfully overcome adversity. Since former studies have shown that resilience can be trained in physical face-to-face settings, this meta-analysis investigates whether digitally delivered resilience training can also be efficacious.</span></p>
<section id="overview" class="level1">
<h1>Overview</h1>
<section id="focus-of-the-study" class="level3">
<h3 class="anchored" data-anchor-id="focus-of-the-study">Focus of the study</h3>
<p>Investigating the efficacy of digital resilience training.</p>
</section>
<section id="target-group" class="level3">
<h3 class="anchored" data-anchor-id="target-group">Target group</h3>
<p>The general public, healthcare professionals (both concerning their patients’ and their own resilience) and game developers.</p>
</section>
<section id="effect-size" class="level3">
<h3 class="anchored" data-anchor-id="effect-size">Effect size</h3>
<p><span title="Hedges' g = 0.54 - 1.09. Hedges' g is an effect size measure that denotes the magnitude of group differences. It is a more reliable measure when sample sizes of studies are small." style="font-weight: bold; color: #78c2ad;">Moderate to strong effects</span> in favor of digital resilience training.</p>
</section>
<section id="further-notable-results" class="level3">
<h3 class="anchored" data-anchor-id="further-notable-results">Further notable results</h3>
<p>Internet-based interventions with a flexible training schedule showed the most promising effects compared to other intervention types</p>
</section>
</section>
<section id="what-is-this-study-about" class="level1">
<h1>What is this study about?</h1>
<p>Stress is a primary driver of mental health issues such as depression or anxiety. Especially tough times like the COVID-19 pandemic tend to leave their marks on our collective mental well-being. Building resilience or, in other words, psychological resistance against stress is crucial for preventing the development of mental health problems. This not only affects the general public, but also healthcare professionals, with <span title="31% during COVID times. Also my motivational level of getting up in the morning.">26%</span> reporting low resilience. People with a higher degree of resilience enjoy be tter well-being and health, tend to be more productive and report more academic success. Given the importance of resilience, understanding the different conceptualizations is essential. Resilience can be perceived from a trait, process or outcome perspective. The trait perspective describes it as a component of one’s personality, something stable over time, while the process perspective views it as something volatile and dynamic, and focusses on how resilient one feels at the moment. The outcome perspective merely is interested in whether one is able to bounce back from adversity or mental health issues and not so much in how one perceives it subjectively. Irrespective of conceptual variance, research found that people are able to train their resilience. The question that remains to be answered is “How do you train it?”.</p>
<p>According to resilience theory, resilience is characterized by a multitude of components and mechanisms, ranging from the cellular to the societal level. The majority of existing resilience interventions, however, have been focussing on the <span title="A mix of psychological and social factors. Also a sick slipknot song.">psychosocial</span> domain, targeting personal and relational factors. Fostering cognitive flexibility, for instance, marks one personal approach. Cognitive flexibility refers to the ability to reframe a stressful situation and thereby finding alternative solutions to it. In terms of relational interventions, strengthening one’s social support and relationships was shown to increase resilience. Since more conclusive evidence was found with respect to these psychosocial factors, the current meta-analysis focuses on them. Due to the advancements in <span title="The transmission of messages, in this case via digital media.">telecommunication technologies</span> and a general rise in <span title="The capability of handling digital technologies.">digital literacy,</span> the provision of resilience interventions via digital media has increased. This potentially offers comprehensive accessibility of such interventions and is therefore important to be investigated.</p>
<p>The current meta-analysis assesses the efficacy of resilience trainings delivered via computers, mobile devices or the internet. While face-to-face interventions with physical presence have been shown to improve one’s resilience both as a therapeutic measure and a preventive tool for the general population, it remains unclear whether this is also true in a digital context. While both modalities (face-to-face and digital) offer the possibility of synchronous communication, it has been shown that the lack of physical presence can attenuate a learner’s interest and motivation in an online paradigm. In light of the improvements in the digital infrastructure, the affinity of the general public towards digital technologies and a continuous increase in mental health issues, it is crucial to evaluate the potential of digital interventions to foster resilience. Therefore, this meta-analysis intends to (1) assess the effectiveness of digital resilience training and (2) extract the most important features for designing such interventions.</p>
</section>
<section id="what-does-this-study-find" class="level1">
<h1>What does this study find?</h1>
<p>This Meta-Analysis found an overall <span title="Z = 4.09, p < 0.05; g = 0.54; 95% CI: 0.28–0.79)" style="font-weight: bold; color: #78c2ad;">moderate</span> increase in resilience directly after the intervention and an overall <span title="Z = 3.00, p < 0.05; g = 1.09, 95% CI: 0.38–1.79)" style="font-weight: bold; color: #78c2ad;">large</span> effect on resilience up to 6 months after the resilience training. The effect directly after the intervention was greater when the intervention did <span title="g = 0.71, 95% CI: 0.38–1.03 compared to included (g = 0.13, 95% CI: −0.07–0.32)" style="font-weight: bold; color: #78c2ad;">not include cognitive flexibility skills</span> ,when the intervention was done <span title="g = 0.74, 95% CI: 0.32–1.17 compared to mobile applications (g = 0.43, 95% CI: −0.05–0.91) or others (g = 0.23, 95% CI: 0.05– 0.79) " style="font-weight: bold; color: #78c2ad;">over the internet</span> and when participants could <span title="g = 0.54, 95% CI: 0.28–0.79 compared to a fixed schedule (g = 0.25, 95% CI: 0.07–0.43)" style="font-weight: bold; color: #78c2ad;">do the training at their own pace</span>.</p>
<p>Regarding anxiety, depressive symptoms and stress this meta-analysis reported that resilience training has no effect on <span title="Z = 0.36, p = 0.12" style="font-weight: bold; color: #78c2ad;">anxiety</span> and <span title="Z = 0.80, p = 0.42" style="font-weight: bold; color: #78c2ad;">stress symptoms</span> directly after the intervention and only a small effect on <span title="(Z = 3.67, p < 0.05; g = 0.36, 95% CI: 0.20–0.53; no effect for stress (Z = 1.34, p = 0.18)" style="font-weight: bold; color: #78c2ad;">anxiety after 6 months</span>. The resilience training could reduce depressive symptoms directly after the intervention and after 6 months with a <span title="after intervention (Z = 4.32, p < 0.05, g = 0.36, 95% CI: 0.20–0.53) and after 6 months (Z = 3.83, p < 0.05, g = 0.35, 95% CI: 0.17–0.53)" style="font-weight: bold; color: #78c2ad;">small effect</span>.</p>
</section>
<section id="qualitiy-of-the-meta-analysis" class="level1">
<h1>Qualitiy of the meta-analysis</h1>
<p>The meta-analysis itself does a good job of inspecting the quality of the evidence. The review was prepared in accordance with the PRISMA guidelines and prospectively registered in the PROSPERO database. It uses several measures to evaluate the overall quality of the evidence. However there is an exaggeration in the abstract of the meta-analysis, succumbing to the bad practice of hyping one’S results.</p>
</section>
<section id="quality-of-the-evidence" class="level1">
<h1>Quality of the evidence</h1>
<p>The evidence is not credible. The funnel plot and the Egger regression test indicate a publication bias. The risk of bias was not satisfactory for 19 out of the 22 included studies. Using the GRADE criteria the quality of the evidence ranges from very low to low.Heterogeneous findings and variation in the population and intervention characteristics further complicate the picture. Altogether more high-quality studies need to be conducted before conclusive assertions can be made.The meta-analysis suggest that reported effect sizes may be inflated to a large extent.</p>
</section>
<section id="conclusion-for-teaching-practice" class="level1">
<h1>Conclusion for teaching practice</h1>
<p>There are no substantial conclusions that can be drawn from this meta-analysis due to the dubious nature of the credibility of the findings. Expressed in the words of the authors, this means that: “more attention is warranted to improve the quality of future trials to ensure that grounded inferences may be made from its conclusions.”.</p>
</section>
<section id="study-example" class="level1">
<h1>Study example</h1>
<p><a href="https://flopaho.github.io/building-resilience/study1.html">A therapist-guided smartphone app for major depression in young adults</a></p>
<p><a href="https://flopaho.github.io/building-resilience/study2.html">Study 2</a></p>
<p><a href="https://flopaho.github.io/building-resilience/study3.html">Study 3</a></p>
<div class="quarto-figure quarto-figure-center">
<figure class="figure">
<p><img src="resilience.png" class="img-fluid figure-img"></p>
<figcaption>Resilience as it is imagined by DALL-E2</figcaption>
</figure>
</div>
</section>
<section id="references" class="level1">
<h1>References</h1>
<p>Ang, W. H. D., Chew, H. S. J., Dong, J., Yi, H., Mahendren, R., &amp; Lau, Y. (2022). Digital training for building resilience: Systematic review, meta‐analysis, and meta‐regression. Stress and Health, 38(5), 848-869.</p>
<p><a href="https://onlinelibrary.wiley.com/doi/pdf/10.1002/smi.3154">Download article</a></p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    text: function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      // TODO in 1.5, we should make sure this works without a callout special case
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->
<footer class="footer">
  <div class="nav-footer">
    <div class="nav-footer-left">
      &nbsp;
    </div>   
    <div class="nav-footer-center">
      &nbsp;
    </div>
    <div class="nav-footer-right">
<p>Built with <a href="https://quarto.org/">Quarto</a></p>
</div>
  </div>
</footer>




</body></html>